# ハナトレ - プロダクト仕様書

## 1. プロダクト概要

### 1.1 コンセプト
**「伝える力を、ゲームで鍛える」** - Duolingo型ゲーミフィケーション × 科学的メソッドで言語化力を鍛えるアプリ

### 1.2 アプリ名
- 日本語: **ハナトレ**
- 英語: **Hanatore**
- 意味: 「話す」+「トレーニング」

### 1.3 ビジョン
- **短期**: 20-30代社会人向けtoCアプリとして実績を作る
- **中期**: 企業の新人研修・営業研修へB2B展開
- **長期**: ビジネスコミュニケーション研修のスタンダードへ

### 1.4 解決する課題
- 会議で自分の意見が言えない
- 報告・説明がうまくできない
- 頭の中を言葉にするのが苦手
- 伝えたいことが相手に伝わらない

---

## 2. ターゲットユーザー

### 2.1 メインターゲット
| 属性 | 詳細 |
|------|------|
| 年齢 | 20-35歳 |
| 属性 | 社会人（若手〜中堅） |
| 課題 | 伝える力に自信がない、言語化が苦手 |
| 動機 | 仕事で成果を出したい、評価されたい |

### 2.2 サブターゲット
| 層 | 課題 | アプリの使い方 |
|----|------|----------------|
| 営業職 | 商談で伝わらない | 説明力・提案力UP |
| リーダー層 | 1on1、フィードバックが苦手 | マネジメント力UP |
| 転職者 | 面接で言いたいことが言えない | 自己PR練習 |
| 就活生 | 自己分析・言語化ができない | 面接対策 |

### 2.3 ペルソナ
**佐藤さん（27歳・メーカー勤務3年目）**
- 会議で発言を求められると頭が真っ白になる
- 上司への報告が「で、結論は？」と言われがち
- 本やYouTubeで勉強しても実践できない
- 通勤時間（往復1時間）を有効活用したい
- 忙しいので1日5分くらいが限界

---

## 3. 機能一覧（MVP）

### 3.1 コア機能

#### 3.1.1 デイリートレーニング
| 機能 | 説明 |
|------|------|
| 瞬発力モード | 1分以内に言葉を複数出す訓練 |
| 構造化モード | 3分でメソッド（PREP等）を使って回答 |
| 毎日のお題 | 日替わりで新しい問題を提供 |

#### 3.1.2 トレーニングモード（5種類）
| モード | 内容 | 鍛えるスキル |
|--------|------|--------------|
| 💼 ビジネス基礎 | 報連相、会議発言、指示出し | 論理的説明力 |
| 🎤 プレゼン・説明 | 企画説明、商品紹介、提案 | 構成力・説得力 |
| 🤝 1on1・FB | フィードバック、傾聴、質問 | 対人コミュニケーション |
| 💬 日常会話 | 雑談、エピソードトーク | 会話力・親しみやすさ |
| 📝 思考整理 | モヤモヤの言語化、意思決定 | 内省・自己理解 |

#### 3.1.3 AI採点・フィードバック
| 機能 | 説明 |
|------|------|
| スコアリング | 具体性/構造/説得力の3軸で採点 |
| 改善提案 | AIが具体的な改善ポイントを提示 |
| 模範解答 | 高得点の回答例を表示 |

#### 3.1.4 ゲーミフィケーション
| 要素 | 説明 |
|------|------|
| XP（経験値） | 問題クリアで獲得、「伝える力」として可視化 |
| ストリーク | 連続日数を記録、継続モチベーション |
| レベル | XP蓄積でレベルアップ、称号獲得 |
| リーグ | 週間ランキングで他ユーザーと競争 |
| アチーブメント | 実績バッジ、コレクション要素 |

#### 3.1.5 称号システム
```
Lv.1-4   : 言語化ビギナー
Lv.5-9   : 伝え方見習い
Lv.10-14 : 説明上手
Lv.15-19 : プレゼンター
Lv.20-24 : コミュニケーター
Lv.25+   : 言語化マスター
```

### 3.2 Pro版限定機能
| 機能 | 説明 |
|------|------|
| AI対話モード | キャラクターとの対話形式で実践練習 |
| 無制限練習 | 1日の問題数制限なし |
| 全モード解放 | 5モードすべて利用可能 |
| 詳細分析 | 週次レポート、成長グラフ |
| 全メソッド | 高度なフレームワーク（MECE、ロジックツリー等） |

---

## 4. 画面一覧

### 4.1 画面遷移図
```
スプラッシュ
    ↓
オンボーディング（初回のみ）
    ├── 共感メッセージ「伝えるのが苦手？」
    ├── 興味のあるモード選択
    ├── 目標設定（1日何分？）
    ├── レベルチェック（3問）
    └── 通知許可
    ↓
ホーム
    ├── 今日のミッション
    ├── ストリーク/XP/レベル表示
    ├── トレーニングモード選択
    └── Pro誘導バナー
    ↓
モード選択
    ├── ビジネス基礎
    ├── プレゼン・説明
    ├── 1on1・FB
    ├── 日常会話
    └── 思考整理
    ↓
トレーニング選択
    ├── 瞬発力モード（1分）
    ├── 構造化モード（3分）
    └── AI対話モード（Pro）
    ↓
問題画面
    ├── お題表示
    ├── メソッドヒント
    ├── 入力欄
    └── タイマー
    ↓
結果画面
    ├── スコア（3軸）
    ├── フィードバック
    ├── 改善ポイント
    └── 獲得XP
    ↓
完了画面
    ├── ストリーク更新
    ├── レベルアップ演出
    └── シェアボタン
```

### 4.2 主要画面詳細

#### ホーム画面
```
┌─────────────────────────────┐
│ ハナトレ         🔥 12日連続 │
├─────────────────────────────┤
│                             │
│  👤 Lv.8 説明上手           │
│  ████████████░░░░ 1,850 XP  │
│  次のレベルまで 150 XP      │
│                             │
├─────────────────────────────┤
│  🎯 今日のミッション        │
│  ━━━━━━━━━━━━━━━━━━━━━━   │
│  □ ビジネス基礎 1問         │
│  □ 瞬発力チャレンジ         │
│  ☑ ログインボーナス +10XP   │
│                             │
├─────────────────────────────┤
│  📚 トレーニング            │
│                             │
│  ┌─────────────────────┐   │
│  │ 💼 ビジネス基礎     │   │
│  │    報連相・会議発言  │   │
│  └─────────────────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │ 🎤 プレゼン・説明   │   │
│  │    企画・提案・説明  │   │
│  └─────────────────────┘   │
│                             │
│  ┌─────────────────────┐   │
│  │ 💬 AI対話    🔒     │   │
│  │    Proで解放        │   │
│  └─────────────────────┘   │
│                             │
├─────────────────────────────┤
│  🏆 週間リーグ: シルバー    │
│  現在 8位 / 30人            │
├─────────────────────────────┤
│ [ホーム] [履歴] [リーグ] [設定] │
└─────────────────────────────┘
```

#### 問題画面（構造化モード）
```
┌─────────────────────────────┐
│ ← ビジネス基礎    ⏱️ 2:45   │
├─────────────────────────────┤
│                             │
│   📝 お題                   │
│   ━━━━━━━━━━━━━━━━━━━━━━   │
│   上司に進捗報告をしてください│
│   プロジェクトは予定より     │
│   1週間遅れています         │
│                             │
├─────────────────────────────┤
│                             │
│   💡 使うメソッド: PREP法   │
│   P: 結論を最初に           │
│   R: 理由を述べる           │
│   E: 具体例を出す           │
│   P: 結論で締める           │
│                             │
├─────────────────────────────┤
│                             │
│   ┌─────────────────────┐   │
│   │                     │   │
│   │  （入力欄）          │   │
│   │                     │   │
│   │                     │   │
│   └─────────────────────┘   │
│                             │
│        [回答する]           │
│                             │
└─────────────────────────────┘
```

#### 結果画面
```
┌─────────────────────────────┐
│           結果              │
├─────────────────────────────┤
│                             │
│         85点                │
│        ⭐⭐⭐⭐☆            │
│                             │
│   ┌─────────────────────┐   │
│   │ 具体性    ████████░░ │   │
│   │ 構造      ███████░░░ │   │
│   │ 説得力    █████████░ │   │
│   └─────────────────────┘   │
│                             │
├─────────────────────────────┤
│   💡 フィードバック         │
│   ━━━━━━━━━━━━━━━━━━━━━━   │
│   結論から話せていてGood！   │
│   遅延の理由も明確です。     │
│                             │
│   💪 改善ポイント：          │
│   「今後の対策」を加えると   │
│   さらに信頼感がUPします     │
│                             │
├─────────────────────────────┤
│   +50 XP 獲得！              │
│                             │
│   [もう1問] [終了する]      │
└─────────────────────────────┘
```

---

## 5. データモデル

### 5.1 ER図（概要）
```
User
  │
  ├── UserProgress（進捗）
  │
  ├── TrainingSession（トレーニング履歴）
  │     └── Answer（回答）
  │
  ├── Subscription（課金状態）
  │
  └── Achievement（実績）

Question（問題マスタ）
  ├── Category（カテゴリ/モード）
  └── Method（メソッド）
```

### 5.2 テーブル定義

#### users
| カラム | 型 | 説明 |
|--------|-----|------|
| id | UUID | PK |
| firebase_uid | VARCHAR | Firebase Auth UID |
| email | VARCHAR | メールアドレス |
| display_name | VARCHAR | 表示名 |
| level | INT | 現在レベル |
| total_xp | INT | 累計XP |
| current_streak | INT | 現在のストリーク |
| longest_streak | INT | 最長ストリーク |
| last_training_date | DATE | 最終トレーニング日 |
| preferred_modes | JSONB | 好みのモード |
| created_at | TIMESTAMP | 作成日時 |
| updated_at | TIMESTAMP | 更新日時 |

#### questions
| カラム | 型 | 説明 |
|--------|-----|------|
| id | UUID | PK |
| mode | ENUM | ビジネス基礎/プレゼン/1on1/日常会話/思考整理 |
| training_type | ENUM | 瞬発力/構造化 |
| method | VARCHAR | 使用メソッド（PREP, STAR, 5W1H等） |
| title | TEXT | お題 |
| context | TEXT | 状況説明（あれば） |
| hint | TEXT | ヒント |
| sample_answer | TEXT | 模範解答 |
| difficulty | INT | 難易度（1-5） |
| is_premium | BOOLEAN | Pro限定か |
| created_at | TIMESTAMP | 作成日時 |

#### training_sessions
| カラム | 型 | 説明 |
|--------|-----|------|
| id | UUID | PK |
| user_id | UUID | FK → users |
| mode | ENUM | モード |
| training_type | ENUM | 瞬発力/構造化/AI対話 |
| started_at | TIMESTAMP | 開始日時 |
| completed_at | TIMESTAMP | 完了日時 |
| total_xp_earned | INT | 獲得XP |
| questions_count | INT | 問題数 |

#### answers
| カラム | 型 | 説明 |
|--------|-----|------|
| id | UUID | PK |
| session_id | UUID | FK → training_sessions |
| question_id | UUID | FK → questions |
| user_id | UUID | FK → users |
| content | TEXT | 回答内容 |
| score | INT | スコア（0-100） |
| score_detail | JSONB | 詳細スコア（具体性/構造/説得力） |
| feedback | TEXT | AIフィードバック |
| improvements | JSONB | 改善ポイント配列 |
| time_spent_seconds | INT | 回答時間 |
| created_at | TIMESTAMP | 作成日時 |

#### subscriptions
| カラム | 型 | 説明 |
|--------|-----|------|
| id | UUID | PK |
| user_id | UUID | FK → users |
| plan | ENUM | free/pro |
| status | ENUM | active/cancelled/expired |
| revenuecat_id | VARCHAR | RevenueCat ID |
| started_at | TIMESTAMP | 開始日時 |
| expires_at | TIMESTAMP | 有効期限 |
| created_at | TIMESTAMP | 作成日時 |

#### achievements
| カラム | 型 | 説明 |
|--------|-----|------|
| id | UUID | PK |
| user_id | UUID | FK → users |
| achievement_type | VARCHAR | 実績タイプ |
| unlocked_at | TIMESTAMP | 解除日時 |

#### league_participants
| カラム | 型 | 説明 |
|--------|-----|------|
| id | UUID | PK |
| user_id | UUID | FK → users |
| league_id | VARCHAR | リーグID（週次） |
| league_tier | ENUM | ブロンズ/シルバー/ゴールド/プラチナ |
| weekly_xp | INT | 週間獲得XP |
| rank | INT | 順位 |
| created_at | TIMESTAMP | 作成日時 |

---

## 6. API設計

### 6.1 エンドポイント一覧

#### 認証
| Method | Endpoint | 説明 |
|--------|----------|------|
| POST | /api/auth/register | ユーザー登録 |
| POST | /api/auth/login | ログイン |
| DELETE | /api/auth/logout | ログアウト |

#### ユーザー
| Method | Endpoint | 説明 |
|--------|----------|------|
| GET | /api/users/me | 自分の情報取得 |
| PATCH | /api/users/me | プロフィール更新 |
| GET | /api/users/me/progress | 進捗取得（XP, レベル, ストリーク） |
| GET | /api/users/me/achievements | 実績一覧 |
| GET | /api/users/me/stats | 統計情報（週次レポート用） |

#### トレーニング
| Method | Endpoint | 説明 |
|--------|----------|------|
| GET | /api/questions/daily | 今日のおすすめ問題 |
| GET | /api/questions | 問題一覧（モード/タイプでフィルタ） |
| GET | /api/questions/:id | 問題詳細取得 |
| POST | /api/training/start | セッション開始 |
| POST | /api/training/answer | 回答送信（AI採点） |
| POST | /api/training/complete | セッション完了 |
| GET | /api/training/history | 履歴取得 |

#### AI
| Method | Endpoint | 説明 |
|--------|----------|------|
| POST | /api/ai/evaluate | 回答を採点 |
| POST | /api/ai/dialogue | AI対話（Pro） |

#### リーグ
| Method | Endpoint | 説明 |
|--------|----------|------|
| GET | /api/league/current | 今週のリーグ情報 |
| GET | /api/league/ranking | ランキング取得 |

#### 課金
| Method | Endpoint | 説明 |
|--------|----------|------|
| GET | /api/subscription/status | 課金状態取得 |
| POST | /api/subscription/webhook | RevenueCat Webhook |

### 6.2 主要APIレスポンス例

#### POST /api/ai/evaluate
```json
// Request
{
  "question_id": "uuid",
  "answer": "結論から申し上げますと、プロジェクトは1週間遅れております。原因は...",
  "method": "PREP"
}

// Response
{
  "score": 85,
  "score_detail": {
    "specificity": 90,
    "structure": 80,
    "persuasiveness": 85
  },
  "feedback": "結論から話せていてGood！遅延の理由も明確です。",
  "improvements": [
    "「今後の対策」を加えるとさらに信頼感がUP"
  ],
  "sample_answer": "結論から申し上げますと...",
  "xp_earned": 50
}
```

---

## 7. 技術スタック

### 7.1 フロントエンド
| 項目 | 技術 |
|------|------|
| フレームワーク | React Native (Expo) |
| 言語 | TypeScript |
| 状態管理 | Zustand |
| ナビゲーション | Expo Router |
| UIライブラリ | NativeWind (TailwindCSS) |
| フォーム | React Hook Form + Zod |
| 課金 | RevenueCat |

### 7.2 バックエンド
| 項目 | 技術 |
|------|------|
| ランタイム | Node.js |
| フレームワーク | Hono |
| 言語 | TypeScript |
| ORM | Prisma |
| バリデーション | Zod |
| 認証 | Firebase Auth |

### 7.3 インフラ
| 項目 | 技術 |
|------|------|
| ホスティング | DigitalOcean App Platform |
| データベース | DigitalOcean Managed PostgreSQL |
| キャッシュ | DigitalOcean Managed Redis |
| ストレージ | DigitalOcean Spaces（必要時） |

### 7.4 AI
| 項目 | 技術 |
|------|------|
| メインLLM | Gemini API（無料枠） |
| フォールバック | Claude API / OpenAI API（スケール時） |

### 7.5 外部サービス
| 項目 | サービス |
|------|----------|
| 認証 | Firebase Authentication |
| 課金管理 | RevenueCat |
| アナリティクス | Firebase Analytics |
| クラッシュレポート | Sentry |
| プッシュ通知 | Expo Notifications |

---

## 8. マネタイズ

### 8.1 料金プラン
| プラン | 価格 | 内容 |
|--------|------|------|
| **Free** | ¥0 | 1日3問、2モードまで、基本フィードバック |
| **Pro** | ¥980/月 | 無制限、全モード、AI対話、詳細分析 |
| **Pro年額** | ¥7,800/年 | 月額より33%お得 |

### 8.2 Free → Pro 課金導線
| トリガー | 表示 |
|----------|------|
| 1日3問消化後 | 「今日の無料分終了。Proなら無制限」 |
| 制限モード選択時 | 「このモードはProで解放」 |
| AI対話タップ時 | 「Proで実践練習し放題」 |
| 7日連続後 | 「Pro限定の詳細レポートを見る？」 |

### 8.3 収益予測（toC）
| フェーズ | MAU | 課金率 | 月間売上 |
|----------|-----|--------|----------|
| ローンチ後3ヶ月 | 1,000 | 4% | ¥4万 |
| 6ヶ月後 | 5,000 | 5% | ¥25万 |
| 1年後 | 15,000 | 6% | ¥90万 |

### 8.4 将来のB2B展開
| ターゲット | 価格 | 内容 |
|------------|------|------|
| スタートアップ | ¥30,000/月 | 10名まで、管理画面 |
| 中小企業 | ¥80,000/月 | 50名まで、レポート機能 |
| 大企業研修 | ¥200,000〜/月 | カスタマイズ、専任サポート |

---

## 9. ロードマップ

### Phase 1: MVP（3ヶ月）
- [ ] プロジェクト初期化（monorepo構成）
- [ ] 基本UI実装（ホーム、トレーニング、結果）
- [ ] 問題コンテンツ作成（60問：各モード12問）
- [ ] AI採点機能（Gemini API連携）
- [ ] ゲーミフィケーション（XP、ストリーク、レベル）
- [ ] Firebase Auth連携
- [ ] RevenueCat連携
- [ ] TestFlight / 内部テスト

### Phase 2: 正式リリース（+1ヶ月）
- [ ] App Store / Google Play 申請
- [ ] ランディングページ作成
- [ ] ASO（App Store Optimization）
- [ ] 初期ユーザー獲得施策（SNS、口コミ）

### Phase 3: 機能拡充（+2ヶ月）
- [ ] AI対話モード実装
- [ ] リーグ機能実装
- [ ] 週次レポート機能
- [ ] アチーブメントシステム
- [ ] 問題追加（計150問）

### Phase 4: B2B準備（+3ヶ月）
- [ ] 管理画面開発
- [ ] チームプラン実装
- [ ] 企業向け営業資料作成
- [ ] パイロット導入（2-3社）

---

## 10. 成功指標（KPI）

### 10.1 プロダクト指標
| 指標 | 目標（6ヶ月後） |
|------|----------------|
| DAU/MAU比 | 25%以上 |
| Day1リテンション | 40%以上 |
| Day7リテンション | 20%以上 |
| Day30リテンション | 10%以上 |
| 平均セッション時間 | 4分以上 |
| 平均ストリーク | 5日以上 |

### 10.2 ビジネス指標
| 指標 | 目標（6ヶ月後） |
|------|----------------|
| MAU | 5,000人 |
| 課金転換率 | 5%以上 |
| 月間売上 | ¥25万 |
| ARPU（全体） | ¥50 |
| ARPPU（課金者） | ¥980 |

---

## 11. デザインシステム

### 11.1 トーン＆マナー
| 要素 | 方針 |
|------|------|
| 全体の印象 | ポップ・カジュアル（Duolingo風） |
| 雰囲気 | フレンドリー、楽しい、応援してくれる |
| 避けること | 堅苦しい、説教くさい、難しそう |

### 11.2 マスコットキャラクター

**名前: ハナ（🦊キツネ）**

| 項目 | 設定 |
|------|------|
| モチーフ | キツネ |
| 色 | オレンジ |
| 性格 | 優しく励ましてくれる、ちょっとおっちょこちょい |
| 役割 | フィードバック、応援、ガイド、チュートリアル |

**キャラクターの登場シーン:**
- オンボーディング（自己紹介）
- トレーニング完了時（褒める）
- ストリーク継続時（応援）
- ミス時（励まし）
- レベルアップ時（お祝い）

### 11.3 カラーパレット

```
Primary:     #FF8C42（オレンジ）  ← キツネ/メインカラー
Secondary:   #6C5CE7（パープル）  ← アクセント/リンク
Accent:      #FFEAA7（イエロー）  ← 強調/バッジ
Background:  #FFF9F0（クリーム）  ← 背景/温かみ
Surface:     #FFFFFF（ホワイト）  ← カード背景
Text:        #2D3436（ダークグレー）← 本文
TextSub:     #636E72（グレー）    ← サブテキスト
Success:     #00B894（グリーン）  ← 正解/達成
Error:       #FF6B6B（コーラル）  ← エラー/警告
Streak:      #E17055（ダークオレンジ）← ストリーク
```

### 11.4 カラーの使い方
| 色 | 用途 |
|------|------|
| オレンジ | プライマリボタン、キャラ、XP獲得、重要要素 |
| パープル | セカンダリボタン、リンク、リーグ |
| イエロー | バッジ、ハイライト、ログインボーナス |
| グリーン | 正解、レベルアップ、達成 |
| コーラル | ミス、ハート減少、警告 |

### 11.5 タイポグラフィ
| 用途 | フォント | サイズ |
|------|----------|--------|
| 見出し（大） | System Bold | 28px |
| 見出し（中） | System Bold | 22px |
| 見出し（小） | System SemiBold | 18px |
| 本文 | System Regular | 16px |
| サブテキスト | System Regular | 14px |
| キャプション | System Regular | 12px |

### 11.6 コンポーネント

#### ボタン
```
Primary:   オレンジ背景 + 白テキスト + 角丸12px
Secondary: パープル背景 + 白テキスト + 角丸12px
Outline:   白背景 + オレンジ枠 + オレンジテキスト
Disabled:  グレー背景 + グレーテキスト
```

#### カード
```
背景: 白
角丸: 16px
シャドウ: 軽めのドロップシャドウ
パディング: 16px
```

#### 進捗バー
```
背景: 薄いグレー
進捗: オレンジのグラデーション
高さ: 8px
角丸: 4px
```

### 11.7 アイコン
| スタイル | 説明 |
|----------|------|
| 形式 | アウトラインベース（Lucide Icons推奨） |
| サイズ | 24px（標準）、20px（小）、32px（大） |
| 色 | コンテキストに合わせて変更 |

### 11.8 参考アプリ
| アプリ | 参考ポイント |
|--------|--------------|
| Duolingo | ゲーミフィケーション、キャラクター、進捗表示、リーグ |
| Habitify | シンプルな達成感、ストリーク表示 |
| Headspace | 柔らかいイラスト、リラックス感 |
| Forest | ゲーム要素、報酬システム |

---

## 12. 科学的メソッド一覧

### 11.1 基本メソッド（Free）
| メソッド | 用途 | 説明 |
|----------|------|------|
| PREP法 | 説明・報告 | 結論→理由→具体例→結論 |
| 5W1H | 状況説明 | Who/What/When/Where/Why/How |
| ゼロ秒思考 | 思考整理 | 1分で頭の中を書き出す |

### 11.2 応用メソッド（Pro）
| メソッド | 用途 | 説明 |
|----------|------|------|
| STAR法 | 経験談・実績 | 状況→課題→行動→結果 |
| MECE | 情報整理 | モレなくダブりなく |
| ロジックツリー | 問題分析 | 階層的に分解 |
| ストーリーテリング | 共感獲得 | 起承転結で感情を動かす |
| アクティブリスニング | 傾聴・質問 | 深掘り質問の技術 |

---

## 改訂履歴

| バージョン | 日付 | 内容 |
|------------|------|------|
| 1.0 | 2026-02-14 | 初版作成（就活生向け） |
| 2.0 | 2026-02-14 | ターゲット変更（社会人スキルUP向け） |
| 2.1 | 2026-02-14 | デザインシステム追加（キツネキャラ、カラーパレット） |
